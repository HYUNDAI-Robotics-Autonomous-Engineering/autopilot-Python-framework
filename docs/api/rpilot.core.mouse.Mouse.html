<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Mouse &#8212; rpilot 0.2 documentation</title>
    <link rel="stylesheet" href="/../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="/../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/restyle.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="/../_static/documentation_options.js"></script>
    <script type="text/javascript" src="/../_static/jquery.js"></script>
    <script type="text/javascript" src="/../_static/underscore.js"></script>
    <script type="text/javascript" src="/../_static/doctools.js"></script>
    <script type="text/javascript" src="/../_static/language_data.js"></script>
    <script type="text/javascript" src="/../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="/../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="/../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/../_static/bootstrap-sphinx.js"></script>
    <link rel="canonical" href="http://docs.rpilot.net/api/rpilot.core.mouse.Mouse.html" />
    <link rel="index" title="Index" href="/../genindex.html" />
    <link rel="search" title="Search" href="/../search.html" />
    <link rel="next" title="networking" href="/../rpilot.core.networking.html" />
    <link rel="prev" title="mouse" href="/../rpilot.core.mouse.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          RPilot</a>
        <span class="navbar-text navbar-version pull-left"><b>0.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">RPilot Docs <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../rpilot.core.html">core</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../rpilot.core.gui.html">gui</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.gui.html#functions">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.gui.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.gui.html#class-inheritance-diagram">Class Inheritance Diagram</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.core.hardware.html">hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.hardware.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.hardware.html#class-inheritance-diagram">Class Inheritance Diagram</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../rpilot.core.mouse.html">mouse</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../rpilot.core.mouse.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.mouse.html#class-inheritance-diagram">Class Inheritance Diagram</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.core.networking.html">networking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.networking.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.networking.html#class-inheritance-diagram">Class Inheritance Diagram</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.core.pilot.html">pilot</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.pilot.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.pilot.html#class-inheritance-diagram">Class Inheritance Diagram</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.core.plots.html">plots</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.plots.html#functions">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.plots.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.plots.html#class-inheritance-diagram">Class Inheritance Diagram</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.core.terminal.html">terminal</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.terminal.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.terminal.html#class-inheritance-diagram">Class Inheritance Diagram</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.core.utils.html">utils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.utils.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.core.utils.html#class-inheritance-diagram">Class Inheritance Diagram</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rpilot.tasks.html">tasks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.tasks.free_water.html">free_water</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.tasks.free_water.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.tasks.free_water.html#class-inheritance-diagram">Class Inheritance Diagram</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.tasks.graduation.html">graduation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.tasks.graduation.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.tasks.graduation.html#class-inheritance-diagram">Class Inheritance Diagram</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.tasks.nafc.html">nafc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.tasks.nafc.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.tasks.nafc.html#class-inheritance-diagram">Class Inheritance Diagram</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.tasks.task.html">task</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.tasks.task.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.tasks.task.html#class-inheritance-diagram">Class Inheritance Diagram</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rpilot.stim.html">stim</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.stim.managers.html">managers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.stim.managers.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.stim.managers.html#class-inheritance-diagram">Class Inheritance Diagram</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.stim.sound.html">sound</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.stim.sound.jackclient.html">jackclient</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.stim.sound.pyoserver.html">pyoserver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpilot.stim.sound.sounds.html">sounds</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rpilot.viz.html">viz</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.viz.trial_viewer.html">trial_viewer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rpilot.setup.html">setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.setup.setup_pilot.html">setup_pilot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.setup.setup_scale.html">setup_scale</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rpilot.setup.setup_terminal.html">setup_terminal</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rpilot.prefs.html">prefs</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Mouse</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="../rpilot.core.mouse.html" title="Previous Chapter: mouse"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; mouse</span>
    </a>
  </li>
  <li>
    <a href="../rpilot.core.networking.html" title="Next Chapter: networking"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">networking &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/api/rpilot.core.mouse.Mouse.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Mouse</a></li>
</ul>

  <li>
    <a href="../rpilot.core.mouse.html" title="Previous Chapter: mouse"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; mouse</span>
    </a>
  </li>
  <li>
    <a href="../rpilot.core.networking.html" title="Next Chapter: networking"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">networking &raquo;</span>
    </a>
  </li>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="mouse">
<h1>Mouse<a class="headerlink" href="#mouse" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="rpilot.core.mouse.Mouse">
<em class="property">class </em><code class="descclassname">rpilot.core.mouse.</code><code class="descname">Mouse</code><span class="sig-paren">(</span><em>name</em>, <em>dir=None</em>, <em>new=False</em>, <em>biography=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for managing one mouse’s data and protocol.</p>
<p>Creates a <code class="xref py py-mod docutils literal notranslate"><span class="pre">tables</span></code> hdf5 file in <cite>prefs.DATADIR</cite> with the general structure:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="o">/</span> <span class="n">root</span>
<span class="o">|---</span> <span class="n">current</span> <span class="p">(</span><span class="n">tables</span><span class="o">.</span><span class="n">filenode</span><span class="p">)</span> <span class="n">storing</span> <span class="n">the</span> <span class="n">current</span> <span class="n">task</span> <span class="k">as</span> <span class="n">serialized</span> <span class="n">JSON</span>
<span class="o">|---</span> <span class="n">data</span> <span class="p">(</span><span class="n">group</span><span class="p">)</span>
<span class="o">|</span>    <span class="o">|---</span> <span class="n">task_name</span>  <span class="p">(</span><span class="n">group</span><span class="p">)</span>
<span class="o">|</span>         <span class="o">|---</span> <span class="n">S</span><span class="c1">##_step_name</span>
<span class="o">|</span>         <span class="o">|</span>    <span class="o">|---</span> <span class="n">trial_data</span>
<span class="o">|</span>         <span class="o">|</span>    <span class="o">|---</span> <span class="n">continuous_data</span>
<span class="o">|</span>         <span class="o">|---</span> <span class="o">...</span>
<span class="o">|---</span> <span class="n">history</span> <span class="p">(</span><span class="n">group</span><span class="p">)</span>
<span class="o">|</span>    <span class="o">|---</span> <span class="n">hashes</span> <span class="o">-</span> <span class="n">history</span> <span class="n">of</span> <span class="n">git</span> <span class="n">commit</span> <span class="n">hashes</span>
<span class="o">|</span>    <span class="o">|---</span> <span class="n">history</span> <span class="o">-</span> <span class="n">history</span> <span class="n">of</span> <span class="n">changes</span><span class="p">:</span> <span class="n">protocols</span> <span class="n">assigned</span><span class="p">,</span> <span class="n">params</span> <span class="n">changed</span><span class="p">,</span> <span class="n">etc</span><span class="o">.</span>
<span class="o">|</span>    <span class="o">|---</span> <span class="n">weights</span> <span class="o">-</span> <span class="n">history</span> <span class="n">of</span> <span class="n">pre</span> <span class="ow">and</span> <span class="n">post</span><span class="o">-</span><span class="n">task</span> <span class="n">weights</span>
<span class="o">|</span>    <span class="o">|---</span> <span class="n">past_protocols</span> <span class="p">(</span><span class="n">group</span><span class="p">)</span> <span class="o">-</span> <span class="n">stash</span> <span class="n">past</span> <span class="n">protocol</span> <span class="n">params</span> <span class="n">on</span> <span class="n">reassign</span>
<span class="o">|</span>         <span class="o">|---</span> <span class="n">date_protocol_name</span> <span class="o">-</span> <span class="n">tables</span><span class="o">.</span><span class="n">filenode</span> <span class="n">of</span> <span class="n">a</span> <span class="n">previous</span> <span class="n">protocol</span><span class="s1">&#39;s params.</span>
<span class="o">|</span>         <span class="o">|---</span> <span class="o">...</span>
<span class="o">|---</span> <span class="n">info</span> <span class="o">-</span> <span class="n">group</span> <span class="k">with</span> <span class="n">biographical</span> <span class="n">information</span> <span class="k">as</span> <span class="n">attributes</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first simple">
<li><strong>lock</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Lock</span></code>) – manages access to the hdf5 file</li>
<li><strong>name</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Mouse ID</li>
<li><a class="reference external" href="https://docs.python.org/2/library/functions.html#file" title="(in Python v2.7)"><strong>file</strong></a> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Path to hdf5 file - usually <cite>{prefs.DATADIR}/{self.name}.h5</cite></li>
<li><strong>current</strong> (<a class="reference external" href="/https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – current task parameters. loaded from
the ‘current’ <code class="xref py py-mod docutils literal notranslate"><span class="pre">filenode</span></code> of the h5 file</li>
<li><strong>step</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – current step</li>
<li><strong>protocol_name</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – name of currently assigned protocol</li>
<li><strong>current_trial</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – number of current trial</li>
<li><a class="reference internal" href="../rpilot.core.pilot.html#rpilot.core.pilot.RPilot.running" title="rpilot.core.pilot.RPilot.running"><strong>running</strong></a> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Flag that signals whether the mouse is currently running a task or not.</li>
<li><strong>data_queue</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">queue.Queue</span></code>) – Queue to dump data while running task</li>
<li><a class="reference external" href="https://docs.python.org/2/library/thread.html#module-thread" title="(in Python v2.7)"><strong>thread</strong></a> (<a class="reference external" href="/https://docs.python.org/2/library/threading.html#threading.Thread" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Thread</span></code></a>) – thread used to keep file open while running task</li>
<li><strong>did_graduate</strong> (<a class="reference external" href="/https://docs.python.org/2/library/threading.html#threading.Event" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Event</span></code></a>) – Event used to signal if the mouse has graduated the current step</li>
<li><strong>STRUCTURE</strong> (<em>list</em>) – <p>list of tuples with order:</p>
<ul>
<li>full path, eg. ‘/history/weights’</li>
<li>relative path, eg. ‘/history’</li>
<li>name, eg. ‘weights’</li>
<li>type, eg. <a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.Weight_Table" title="rpilot.core.mouse.Mouse.Weight_Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mouse.Weight_Table</span></code></a> or ‘group’</li>
</ul>
</li>
<li><strong>locations</strong> (<em>node</em>) – <code class="xref py py-class docutils literal notranslate"><span class="pre">tables.IsDescriptor</span></code> for tables.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – mouse ID</li>
<li><strong>dir</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – path where the .h5 file is located, if <cite>None</cite>, <cite>prefs.DATADIR</cite> is used</li>
<li><strong>new</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – if True, a new file is made (a new file is made if one does not exist anyway)</li>
<li><strong>biography</strong> (<a class="reference external" href="/https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – If making a new mouse file, a dictionary with biographical data can be passed</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Summary</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.assign_protocol" title="rpilot.core.mouse.Mouse.assign_protocol"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assign_protocol</span></code></a>(protocol[,&nbsp;step_n])</td>
<td>Assign a protocol to the mouse.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.close_hdf" title="rpilot.core.mouse.Mouse.close_hdf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">close_hdf</span></code></a>(h5f)</td>
<td>Flushes &amp; closes the open hdf file.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.data_thread" title="rpilot.core.mouse.Mouse.data_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">data_thread</span></code></a>(queue)</td>
<td>Thread that keeps hdf file open and receives data while task is running.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.ensure_structure" title="rpilot.core.mouse.Mouse.ensure_structure"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ensure_structure</span></code></a>()</td>
<td>Ensure that our h5f has the appropriate baseline structure as defined in <cite>self.STRUCTURE</cite></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.flush_current" title="rpilot.core.mouse.Mouse.flush_current"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flush_current</span></code></a>()</td>
<td>Flushes the ‘current’ attribute in the mouse object to the current filenode in the .h5</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.get_step_history" title="rpilot.core.mouse.Mouse.get_step_history"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_step_history</span></code></a>([use_history])</td>
<td>Gets a dataframe of step numbers, timestamps, and step names as a coarse view of training status.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.get_timestamp" title="rpilot.core.mouse.Mouse.get_timestamp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_timestamp</span></code></a>([simple])</td>
<td>Makes a timestamp.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.get_trial_data" title="rpilot.core.mouse.Mouse.get_trial_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_trial_data</span></code></a>([step])</td>
<td>Get trial data from the current task.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.get_weight" title="rpilot.core.mouse.Mouse.get_weight"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_weight</span></code></a>([which,&nbsp;include_baseline])</td>
<td>Gets start and stop weights.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.graduate" title="rpilot.core.mouse.Mouse.graduate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">graduate</span></code></a>()</td>
<td>Increase the current step by one, unless it is the last step.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.new_mouse_file" title="rpilot.core.mouse.Mouse.new_mouse_file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">new_mouse_file</span></code></a>(biography)</td>
<td>Create a new mouse file and make the general filestructure.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.open_hdf" title="rpilot.core.mouse.Mouse.open_hdf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">open_hdf</span></code></a>([mode])</td>
<td>Opens the hdf5 file.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.prepare_run" title="rpilot.core.mouse.Mouse.prepare_run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_run</span></code></a>()</td>
<td>Prepares the Mouse object to receive data while running the task.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.save_data" title="rpilot.core.mouse.Mouse.save_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_data</span></code></a>(data)</td>
<td>Alternate and equivalent method of putting data in the queue as <cite>Mouse.data_queue.put(data)</cite></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.set_weight" title="rpilot.core.mouse.Mouse.set_weight"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_weight</span></code></a>(date,&nbsp;col_name,&nbsp;new_value)</td>
<td>Updates an existing weight in the weight table.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.stash_current" title="rpilot.core.mouse.Mouse.stash_current"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stash_current</span></code></a>()</td>
<td>Save the current protocol in the history group and delete the node</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.stop_run" title="rpilot.core.mouse.Mouse.stop_run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stop_run</span></code></a>()</td>
<td>puts ‘END’ in the data_queue, which causes <a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.data_thread" title="rpilot.core.mouse.Mouse.data_thread"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_thread()</span></code></a> to end.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.update_biography" title="rpilot.core.mouse.Mouse.update_biography"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_biography</span></code></a>(params)</td>
<td>Change or make a new biographical attribute, stored as attributes of the <cite>info</cite> group.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.update_history" title="rpilot.core.mouse.Mouse.update_history"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_history</span></code></a>(type,&nbsp;name,&nbsp;value[,&nbsp;step])</td>
<td>Update the history table when changes are made to the mouse’s protocol.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.update_weights" title="rpilot.core.mouse.Mouse.update_weights"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_weights</span></code></a>([start,&nbsp;stop])</td>
<td>Store either a starting or stopping mass.</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Documentation</p>
<dl class="method">
<dt id="rpilot.core.mouse.Mouse.assign_protocol">
<code class="descname">assign_protocol</code><span class="sig-paren">(</span><em>protocol</em>, <em>step_n=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.assign_protocol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.assign_protocol" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign a protocol to the mouse.</p>
<p>If the mouse has a currently assigned task, stashes it with <a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.stash_current" title="rpilot.core.mouse.Mouse.stash_current"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stash_current()</span></code></a></p>
<p>Creates groups and tables according to the data descriptions in the task class being assigned.
eg. as described in <code class="xref py py-class docutils literal notranslate"><span class="pre">Task.TrialData</span></code>.</p>
<p>Updates the history table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>protocol</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – <p>the protocol to be assigned. Can be one of</p>
<ul>
<li>the name of the protocol (its filename minus .json) if it is in <cite>prefs.PROTOCOLDIR</cite></li>
<li>filename of the protocol (its filename with .json) if it is in the <cite>prefs.PROTOCOLDIR</cite></li>
<li>the full path and filename of the protocol.</li>
</ul>
</li>
<li><strong>step_n</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – Which step is being assigned?</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.close_hdf">
<code class="descname">close_hdf</code><span class="sig-paren">(</span><em>h5f</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.close_hdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.close_hdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Flushes &amp; closes the open hdf file.
Must be called whenever <a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.open_hdf" title="rpilot.core.mouse.Mouse.open_hdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">open_hdf()</span></code></a> is used.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>h5f</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tables.File</span></code>) – the hdf file opened by <a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.open_hdf" title="rpilot.core.mouse.Mouse.open_hdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">open_hdf()</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.data_thread">
<code class="descname">data_thread</code><span class="sig-paren">(</span><em>queue</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.data_thread"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.data_thread" title="Permalink to this definition">¶</a></dt>
<dd><p>Thread that keeps hdf file open and receives data while task is running.</p>
<p>receives data through <code class="xref py py-attr docutils literal notranslate"><span class="pre">queue</span></code> as dictionaries. Data can be
partial-trial data (eg. each phase of a trial) as long as the task returns a dict with
‘TRIAL_END’ as a key at the end of each trial.</p>
<p>each dict given to the queue should have the <cite>trial_num</cite>, and this method can
properly store data without passing <cite>TRIAL_END</cite> if so. I recommend being explicit, however.</p>
<p>Checks graduation state at the end of each trial.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>queue</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">queue.Queue</span></code>) – passed by <a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.prepare_run" title="rpilot.core.mouse.Mouse.prepare_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">prepare_run()</span></code></a> and used by other
objects to pass data to be stored.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.ensure_structure">
<code class="descname">ensure_structure</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.ensure_structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.ensure_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that our h5f has the appropriate baseline structure as defined in <cite>self.STRUCTURE</cite></p>
<p>Checks that all groups and tables are made, makes them if not</p>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.flush_current">
<code class="descname">flush_current</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.flush_current"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.flush_current" title="Permalink to this definition">¶</a></dt>
<dd><p>Flushes the ‘current’ attribute in the mouse object to the current filenode
in the .h5</p>
<p>Used to make sure the stored .json representation of the current task stays up to date
with the params set in the mouse object</p>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.get_step_history">
<code class="descname">get_step_history</code><span class="sig-paren">(</span><em>use_history=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.get_step_history"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.get_step_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a dataframe of step numbers, timestamps, and step names
as a coarse view of training status.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>use_history</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether to use the history table or to reconstruct steps and dates from the trial table itself.
compatibility fix for old versions that didn’t stash step changes when the whole protocol was updated.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><a class="reference external" href="/http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.get_timestamp">
<code class="descname">get_timestamp</code><span class="sig-paren">(</span><em>simple=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.get_timestamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a timestamp.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>simple</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – <dl class="docutils">
<dt>if True:</dt>
<dd>returns as format ‘%y%m%d-%H%M%S’, eg ‘190201-170811’</dd>
<dt>if False:</dt>
<dd>returns in isoformat, eg. ‘2019-02-01T17:08:02.058808’</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">basestring</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.get_trial_data">
<code class="descname">get_trial_data</code><span class="sig-paren">(</span><em>step=-1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.get_trial_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.get_trial_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get trial data from the current task.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>step</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a><em>, </em><em>list</em><em>, </em><em>'all'</em>) – <p>Step that should be returned, can be one of</p>
<ul class="simple">
<li>-1: most recent step</li>
<li>int: a single step</li>
<li>list of two integers eg. [0, 5], an inclusive range of steps.</li>
<li>anything else, eg. ‘all’: all steps.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">DataFrame of requested steps’ trial data.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="/http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.get_weight">
<code class="descname">get_weight</code><span class="sig-paren">(</span><em>which='last'</em>, <em>include_baseline=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.get_weight"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.get_weight" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets start and stop weights.</p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">add ability to get weights by session number, dates, and ranges.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>which</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – if ‘last’, gets most recent weights. Otherwise returns all weights.</li>
<li><strong>include_baseline</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – if True, includes baseline and minimum mass.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.graduate">
<code class="descname">graduate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.graduate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.graduate" title="Permalink to this definition">¶</a></dt>
<dd><p>Increase the current step by one, unless it is the last step.</p>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.new_mouse_file">
<code class="descname">new_mouse_file</code><span class="sig-paren">(</span><em>biography</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.new_mouse_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.new_mouse_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new mouse file and make the general filestructure.</p>
<p>If a file already exists, open it in append mode, otherwise create it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>biography</strong> (<a class="reference external" href="/https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – Biographical details like DOB, mass, etc.
Typically created by <a class="reference internal" href="../rpilot.core.gui.html#rpilot.core.gui.New_Mouse_Wizard.Biography_Tab" title="rpilot.core.gui.New_Mouse_Wizard.Biography_Tab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Biography_Tab</span></code></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.open_hdf">
<code class="descname">open_hdf</code><span class="sig-paren">(</span><em>mode='r+'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.open_hdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.open_hdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens the hdf5 file.</p>
<p>This should be called at the start of every method that access the h5 file
and <a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.close_hdf" title="rpilot.core.mouse.Mouse.close_hdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close_hdf()</span></code></a> should be called at the end. Otherwise
the file will close and we risk file corruption.</p>
<p>See the pytables docs
<a class="reference external" href="/https://www.pytables.org/cookbook/threading.html">here</a> and
<a class="reference external" href="/https://www.pytables.org/FAQ.html#can-pytables-be-used-in-concurrent-access-scenarios">here</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>mode</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – <p>a file access mode, can be:</p>
<ul class="simple">
<li>’r’: Read-only - no data can be modified.</li>
<li>’w’: Write - a new file is created (an existing file with the same name would be deleted).</li>
<li>’a’ Append - an existing file is opened for reading and writing, and if the file does not exist it is created.</li>
<li>’r+’ (default) - Similar to ‘a’, but file must already exist.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Opened hdf file.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">tables.File</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.prepare_run">
<code class="descname">prepare_run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.prepare_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.prepare_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares the Mouse object to receive data while running the task.</p>
<p>Gets information about current task, trial number,
spawns <a class="reference internal" href="../rpilot.tasks.graduation.html#rpilot.tasks.graduation.Graduation" title="rpilot.tasks.graduation.Graduation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Graduation</span></code></a> object,
spawns <code class="xref py py-attr docutils literal notranslate"><span class="pre">data_queue</span></code> and calls <a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.data_thread" title="rpilot.core.mouse.Mouse.data_thread"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_thread()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>the parameters for the current step, with mouse id, step number,</dt>
<dd>current trial, and session number included.</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">Dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.save_data">
<code class="descname">save_data</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.save_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.save_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternate and equivalent method of putting data in the queue as <cite>Mouse.data_queue.put(data)</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<a class="reference external" href="/https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – trial data. each should have a ‘trial_num’, and a dictionary with key
‘TRIAL_END’ should be passed at the end of each trial.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.set_weight">
<code class="descname">set_weight</code><span class="sig-paren">(</span><em>date</em>, <em>col_name</em>, <em>new_value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.set_weight"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.set_weight" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates an existing weight in the weight table.</p>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">Yes, i know this is bad. Merge with update_weights</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>date</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – date in the ‘simple’ format, %y%m%d-%H%M%S</li>
<li><strong>col_name</strong> (<em>'start'</em><em>, </em><em>'stop'</em>) – are we updating a pre-task or post-task weight?</li>
<li><strong>new_value</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – New mass.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.stash_current">
<code class="descname">stash_current</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.stash_current"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.stash_current" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the current protocol in the history group and delete the node</p>
<p>Typically this is called when assigning a new protocol.</p>
<p>Stored as the date that it was changed followed by its name if it has one</p>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.stop_run">
<code class="descname">stop_run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.stop_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.stop_run" title="Permalink to this definition">¶</a></dt>
<dd><p>puts ‘END’ in the data_queue, which causes <a class="reference internal" href="../rpilot.core.mouse.html#rpilot.core.mouse.Mouse.data_thread" title="rpilot.core.mouse.Mouse.data_thread"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_thread()</span></code></a> to end.</p>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.update_biography">
<code class="descname">update_biography</code><span class="sig-paren">(</span><em>params</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.update_biography"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.update_biography" title="Permalink to this definition">¶</a></dt>
<dd><p>Change or make a new biographical attribute, stored as
attributes of the <cite>info</cite> group.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>params</strong> (<a class="reference external" href="/https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – biographical attributes to be updated.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.update_history">
<code class="descname">update_history</code><span class="sig-paren">(</span><em>type</em>, <em>name</em>, <em>value</em>, <em>step=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.update_history"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.update_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the history table when changes are made to the mouse’s protocol.</p>
<p>The current protocol is flushed to the past_protocols group and an updated
filenode is created.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This <strong>only</strong> updates the history table, and does not make the changes itself.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>type</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – <p>What type of change is being made? Can be one of</p>
<ul>
<li>’param’ - a parameter of one task stage</li>
<li>’step’ - the step of the current protocol</li>
<li>’protocol’ - the whole protocol is being updated.</li>
</ul>
</li>
<li><strong>name</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – the name of either the parameter being changed or the new protocol</li>
<li><strong>value</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – the value that the parameter or step is being changed to,
or the protocol dictionary flattened to a string.</li>
<li><strong>step</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – When type is ‘param’, changes the parameter at a particular step,
otherwise the current step is used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpilot.core.mouse.Mouse.update_weights">
<code class="descname">update_weights</code><span class="sig-paren">(</span><em>start=None</em>, <em>stop=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rpilot/core/mouse.html#Mouse.update_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpilot.core.mouse.Mouse.update_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Store either a starting or stopping mass.</p>
<p><cite>start</cite> and <cite>stop</cite> can be passed simultaneously, <cite>start</cite> can be given in one
call and <cite>stop</cite> in a later call, but <cite>stop</cite> should not be given before <cite>start</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Mass before running task in grams</li>
<li><strong>stop</strong> (<a class="reference external" href="/https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Mass after running task in grams.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Jonny Saunders.<br/>
      Created using <a href="/http://sphinx-doc.org/">Sphinx</a> 1.8.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>