

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>autopilot.core.subject module &mdash; Autopilot 0.2 documentation</title>
  

  
  
  
  
    <link rel="canonical" href="docs.auto-pi-lot.comrst/autopilot.core.subject.html"/>
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/autopilot_theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />

    <link href="https://fonts.googleapis.com/css?family=Cutive+Mono&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Work+Sans:300,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Dosis&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lexend+Deca&display=swap" rel="stylesheet">


</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Autopilot
          

          
            
            <img src="../_static/autopilot_logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guide.overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide.installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guide.installation.pilot.html">Setup a Pilot</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide.installation.pilot.html#scripted-installation">Scripted Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide.installation.pilot.html#manual-preinstall">Manual Preinstall</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide.installation.pilot.html#rasbian-installation">Rasbian Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide.installation.pilot.html#raspbian-performance-improvements">Raspbian Performance Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide.installation.pilot.html#audio-setup">Audio Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide.installation.pilot.html#video-setup">Video Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide.installation.pilot.html#optional-installation-steps">Optional Installation Steps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide.installation.terminal.html">Setup a Terminal</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide.installation.terminal.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide.installation.terminal.html#scripted-terminal-setup">Scripted Terminal Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide.installation.terminal.html#manual-terminal-presetup">Manual Terminal Presetup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide.installation.terminal.html#compiling-installing-qt4-linux">Compiling &amp; Installing Qt4 - Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide.installation.terminal.html#installing-qt4-macos">Installing Qt4 - MacOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide.installation.terminal.html#compiling-installing-pyside-linux-macos">Compiling &amp; Installing PySide - Linux + macOS</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide.training.html">Training a Subject</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guide.training.html#connecting-the-pilot">Connecting the Pilot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide.training.html#creating-a-protocol">Creating a Protocol</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide.training.html#using-the-protocol-wizard">Using the Protocol Wizard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide.training.html#manual-protocol-creation">Manual Protocol Creation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide.training.html#creating-a-subject">Creating a Subject</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide.training.html#running-the-task">Running the Task</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide.training.html#debugging-a-task">Debugging a Task</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide.task.html">Writing a Task</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guide.task.html#the-nafc-task">The Nafc Task</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide.task.html#the-task-class">The <code class="docutils literal notranslate"><span class="pre">Task</span></code> class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide.task.html#four-task-attributes">Four Task Attributes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide.task.html#params">PARAMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide.task.html#data">Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide.task.html#plot">PLOT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide.task.html#hardware">HARDWARE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide.task.html#initialization">Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide.task.html#stage-functions">Stage Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide.task.html#request">Request</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide.task.html#discrim">Discrim</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide.task.html#reinforcement">Reinforcement</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide.task.html#additional-methods">Additional Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide.task.html#nafc-wheel-child-agents">Nafc Wheel - Child Agents</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide.task.html#task-running-styles">Task Running Styles</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide.hardware.html">Writing a Hardware Class</a></li>
</ul>
<p class="caption"><span class="caption-text">API Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../autopilot.core.html">Core Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.core.gui.html">gui</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.core.hardware.html">hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.core.networking.html">networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.core.pilot.html">pilot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.core.plots.html">plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.core.subject.html">mouse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.core.terminal.html">terminal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.core.utils.html">utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../autopilot.tasks.html">Tasks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.tasks.free_water.html">free_water</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.tasks.graduation.html">graduation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.tasks.nafc.html">nafc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.tasks.task.html">task</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../autopilot.stim.html">Stimuli</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.stim.managers.html">managers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.stim.sound.html">sound</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../autopilot.stim.sound.jackclient.html">jackclient</a></li>
<li class="toctree-l3"><a class="reference internal" href="../autopilot.stim.sound.pyoserver.html">pyoserver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../autopilot.stim.sound.sounds.html">sounds</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../autopilot.viz.html">Visualization Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.viz.trial_viewer.html">trial_viewer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../autopilot.setup.html">Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.setup.setup_pilot.html">setup_pilot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.setup.setup_scale.html">setup_scale</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autopilot.setup.setup_terminal.html">setup_terminal</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../autopilot.prefs.html">Prefs</a></li>
</ul>
<p class="caption"><span class="caption-text">Meta:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../todo.html">To-Do</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Autopilot</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>autopilot.core.subject module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/rst/autopilot.core.subject.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-autopilot.core.subject">
<span id="autopilot-core-subject-module"></span><h1>autopilot.core.subject module<a class="headerlink" href="#module-autopilot.core.subject" title="Permalink to this headline">¶</a></h1>
<p>Classes for managing data and protocol access and storage.</p>
<p>Currently named subject, but will likely be refactored to include other data
models should the need arise.</p>
<p><strong>Classes</strong></p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#autopilot.core.subject.Subject" title="autopilot.core.subject.Subject"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Subject</span></code></a>([name,&nbsp;dir,&nbsp;file,&nbsp;new,&nbsp;biography])</td>
<td>Class for managing one subject’s data and protocol.</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="autopilot.core.subject.Subject">
<em class="property">class </em><code class="descclassname">autopilot.core.subject.</code><code class="descname">Subject</code><span class="sig-paren">(</span><em>name=None</em>, <em>dir=None</em>, <em>file=None</em>, <em>new=False</em>, <em>biography=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for managing one subject’s data and protocol.</p>
<p>Creates a <code class="xref py py-mod docutils literal notranslate"><span class="pre">tables</span></code> hdf5 file in <cite>prefs.DATADIR</cite> with the general structure:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="o">/</span> <span class="n">root</span>
<span class="o">|---</span> <span class="n">current</span> <span class="p">(</span><span class="n">tables</span><span class="o">.</span><span class="n">filenode</span><span class="p">)</span> <span class="n">storing</span> <span class="n">the</span> <span class="n">current</span> <span class="n">task</span> <span class="k">as</span> <span class="n">serialized</span> <span class="n">JSON</span>
<span class="o">|---</span> <span class="n">data</span> <span class="p">(</span><span class="n">group</span><span class="p">)</span>
<span class="o">|</span>    <span class="o">|---</span> <span class="n">task_name</span>  <span class="p">(</span><span class="n">group</span><span class="p">)</span>
<span class="o">|</span>         <span class="o">|---</span> <span class="n">S</span><span class="c1">##_step_name</span>
<span class="o">|</span>         <span class="o">|</span>    <span class="o">|---</span> <span class="n">trial_data</span>
<span class="o">|</span>         <span class="o">|</span>    <span class="o">|---</span> <span class="n">continuous_data</span>
<span class="o">|</span>         <span class="o">|---</span> <span class="o">...</span>
<span class="o">|---</span> <span class="n">history</span> <span class="p">(</span><span class="n">group</span><span class="p">)</span>
<span class="o">|</span>    <span class="o">|---</span> <span class="n">hashes</span> <span class="o">-</span> <span class="n">history</span> <span class="n">of</span> <span class="n">git</span> <span class="n">commit</span> <span class="n">hashes</span>
<span class="o">|</span>    <span class="o">|---</span> <span class="n">history</span> <span class="o">-</span> <span class="n">history</span> <span class="n">of</span> <span class="n">changes</span><span class="p">:</span> <span class="n">protocols</span> <span class="n">assigned</span><span class="p">,</span> <span class="n">params</span> <span class="n">changed</span><span class="p">,</span> <span class="n">etc</span><span class="o">.</span>
<span class="o">|</span>    <span class="o">|---</span> <span class="n">weights</span> <span class="o">-</span> <span class="n">history</span> <span class="n">of</span> <span class="n">pre</span> <span class="ow">and</span> <span class="n">post</span><span class="o">-</span><span class="n">task</span> <span class="n">weights</span>
<span class="o">|</span>    <span class="o">|---</span> <span class="n">past_protocols</span> <span class="p">(</span><span class="n">group</span><span class="p">)</span> <span class="o">-</span> <span class="n">stash</span> <span class="n">past</span> <span class="n">protocol</span> <span class="n">params</span> <span class="n">on</span> <span class="n">reassign</span>
<span class="o">|</span>         <span class="o">|---</span> <span class="n">date_protocol_name</span> <span class="o">-</span> <span class="n">tables</span><span class="o">.</span><span class="n">filenode</span> <span class="n">of</span> <span class="n">a</span> <span class="n">previous</span> <span class="n">protocol</span><span class="s1">&#39;s params.</span>
<span class="o">|</span>         <span class="o">|---</span> <span class="o">...</span>
<span class="o">|---</span> <span class="n">info</span> <span class="o">-</span> <span class="n">group</span> <span class="k">with</span> <span class="n">biographical</span> <span class="n">information</span> <span class="k">as</span> <span class="n">attributes</span>
</pre></div>
</div>
<p><strong>Miscallaneous</strong></p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#autopilot.core.subject.Subject.Hash_Table" title="autopilot.core.subject.Subject.Hash_Table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Hash_Table</span></code></a></td>
<td>Class to describe table for hash history</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#autopilot.core.subject.Subject.History_Table" title="autopilot.core.subject.Subject.History_Table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">History_Table</span></code></a></td>
<td>Class to describe parameter and protocol change history</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#autopilot.core.subject.Subject.Weight_Table" title="autopilot.core.subject.Subject.Weight_Table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Weight_Table</span></code></a></td>
<td>Class to describe table for weight history</td>
</tr>
</tbody>
</table>
<p><strong>Methods</strong></p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#autopilot.core.subject.Subject.assign_protocol" title="autopilot.core.subject.Subject.assign_protocol"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assign_protocol</span></code></a>(protocol[,&nbsp;step_n])</td>
<td>Assign a protocol to the subject.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#autopilot.core.subject.Subject.close_hdf" title="autopilot.core.subject.Subject.close_hdf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">close_hdf</span></code></a>(h5f)</td>
<td>Flushes &amp; closes the open hdf file.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#autopilot.core.subject.Subject.data_thread" title="autopilot.core.subject.Subject.data_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">data_thread</span></code></a>(queue)</td>
<td>Thread that keeps hdf file open and receives data while task is running.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#autopilot.core.subject.Subject.ensure_structure" title="autopilot.core.subject.Subject.ensure_structure"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ensure_structure</span></code></a>()</td>
<td>Ensure that our h5f has the appropriate baseline structure as defined in <cite>self.STRUCTURE</cite></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#autopilot.core.subject.Subject.flush_current" title="autopilot.core.subject.Subject.flush_current"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flush_current</span></code></a>()</td>
<td>Flushes the ‘current’ attribute in the subject object to the current filenode</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#autopilot.core.subject.Subject.get_step_history" title="autopilot.core.subject.Subject.get_step_history"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_step_history</span></code></a>([use_history])</td>
<td>Gets a dataframe of step numbers, timestamps, and step names as a coarse view of training status.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#autopilot.core.subject.Subject.get_timestamp" title="autopilot.core.subject.Subject.get_timestamp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_timestamp</span></code></a>([simple])</td>
<td>Makes a timestamp.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#autopilot.core.subject.Subject.get_trial_data" title="autopilot.core.subject.Subject.get_trial_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_trial_data</span></code></a>([step])</td>
<td>Get trial data from the current task.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#autopilot.core.subject.Subject.get_weight" title="autopilot.core.subject.Subject.get_weight"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_weight</span></code></a>([which,&nbsp;include_baseline])</td>
<td>Gets start and stop weights.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#autopilot.core.subject.Subject.graduate" title="autopilot.core.subject.Subject.graduate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">graduate</span></code></a>()</td>
<td>Increase the current step by one, unless it is the last step.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#autopilot.core.subject.Subject.new_subject_file" title="autopilot.core.subject.Subject.new_subject_file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">new_subject_file</span></code></a>(biography)</td>
<td>Create a new subject file and make the general filestructure.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#autopilot.core.subject.Subject.open_hdf" title="autopilot.core.subject.Subject.open_hdf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">open_hdf</span></code></a>([mode])</td>
<td>Opens the hdf5 file.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#autopilot.core.subject.Subject.prepare_run" title="autopilot.core.subject.Subject.prepare_run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_run</span></code></a>()</td>
<td>Prepares the Subject object to receive data while running the task.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#autopilot.core.subject.Subject.save_data" title="autopilot.core.subject.Subject.save_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_data</span></code></a>(data)</td>
<td>Alternate and equivalent method of putting data in the queue as <cite>Subject.data_queue.put(data)</cite></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#autopilot.core.subject.Subject.set_weight" title="autopilot.core.subject.Subject.set_weight"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_weight</span></code></a>(date,&nbsp;col_name,&nbsp;new_value)</td>
<td>Updates an existing weight in the weight table.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#autopilot.core.subject.Subject.stash_current" title="autopilot.core.subject.Subject.stash_current"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stash_current</span></code></a>()</td>
<td>Save the current protocol in the history group and delete the node</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#autopilot.core.subject.Subject.stop_run" title="autopilot.core.subject.Subject.stop_run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stop_run</span></code></a>()</td>
<td>puts ‘END’ in the data_queue, which causes <a class="reference internal" href="#autopilot.core.subject.Subject.data_thread" title="autopilot.core.subject.Subject.data_thread"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_thread()</span></code></a> to end.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#autopilot.core.subject.Subject.update_biography" title="autopilot.core.subject.Subject.update_biography"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_biography</span></code></a>(params)</td>
<td>Change or make a new biographical attribute, stored as attributes of the <cite>info</cite> group.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#autopilot.core.subject.Subject.update_history" title="autopilot.core.subject.Subject.update_history"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_history</span></code></a>(type,&nbsp;name,&nbsp;value[,&nbsp;step])</td>
<td>Update the history table when changes are made to the subject’s protocol.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#autopilot.core.subject.Subject.update_weights" title="autopilot.core.subject.Subject.update_weights"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_weights</span></code></a>([start,&nbsp;stop])</td>
<td>Store either a starting or stopping mass.</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first simple">
<li><strong>lock</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Lock</span></code>) – manages access to the hdf5 file</li>
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Subject ID</li>
<li><a class="reference external" href="https://docs.python.org/2/library/functions.html#file" title="(in Python v2.7)"><strong>file</strong></a> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Path to hdf5 file - usually <cite>{prefs.DATADIR}/{self.name}.h5</cite></li>
<li><strong>current</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – current task parameters. loaded from
the ‘current’ <code class="xref py py-mod docutils literal notranslate"><span class="pre">filenode</span></code> of the h5 file</li>
<li><strong>step</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – current step</li>
<li><strong>protocol_name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – name of currently assigned protocol</li>
<li><strong>current_trial</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – number of current trial</li>
<li><a class="reference internal" href="autopilot.core.pilot.html#autopilot.core.pilot.autopilot.running" title="autopilot.core.pilot.autopilot.running"><strong>running</strong></a> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Flag that signals whether the subject is currently running a task or not.</li>
<li><strong>data_queue</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">queue.Queue</span></code>) – Queue to dump data while running task</li>
<li><a class="reference external" href="https://docs.python.org/2/library/thread.html#module-thread" title="(in Python v2.7)"><strong>thread</strong></a> (<a class="reference external" href="https://docs.python.org/2/library/threading.html#threading.Thread" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Thread</span></code></a>) – thread used to keep file open while running task</li>
<li><strong>did_graduate</strong> (<a class="reference external" href="https://docs.python.org/2/library/threading.html#threading.Event" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Event</span></code></a>) – Event used to signal if the subject has graduated the current step</li>
<li><strong>STRUCTURE</strong> (<em>list</em>) – <p>list of tuples with order:</p>
<ul>
<li>full path, eg. ‘/history/weights’</li>
<li>relative path, eg. ‘/history’</li>
<li>name, eg. ‘weights’</li>
<li>type, eg. <a class="reference internal" href="#autopilot.core.subject.Subject.Weight_Table" title="autopilot.core.subject.Subject.Weight_Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subject.Weight_Table</span></code></a> or ‘group’</li>
</ul>
</li>
<li><strong>locations</strong> (<em>node</em>) – <code class="xref py py-class docutils literal notranslate"><span class="pre">tables.IsDescriptor</span></code> for tables.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – subject ID</li>
<li><strong>dir</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – path where the .h5 file is located, if <cite>None</cite>, <cite>prefs.DATADIR</cite> is used</li>
<li><strong>file</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – load a subject from a filename. if <cite>None</cite>, ignored.</li>
<li><strong>new</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – if True, a new file is made (a new file is made if one does not exist anyway)</li>
<li><strong>biography</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – If making a new subject file, a dictionary with biographical data can be passed</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="autopilot.core.subject.Subject.open_hdf">
<code class="descname">open_hdf</code><span class="sig-paren">(</span><em>mode='r+'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.open_hdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.open_hdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens the hdf5 file.</p>
<p>This should be called at the start of every method that access the h5 file
and <a class="reference internal" href="#autopilot.core.subject.Subject.close_hdf" title="autopilot.core.subject.Subject.close_hdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close_hdf()</span></code></a> should be called at the end. Otherwise
the file will close and we risk file corruption.</p>
<p>See the pytables docs
<a class="reference external" href="https://www.pytables.org/cookbook/threading.html">here</a> and
<a class="reference external" href="https://www.pytables.org/FAQ.html#can-pytables-be-used-in-concurrent-access-scenarios">here</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – <p>a file access mode, can be:</p>
<ul class="simple">
<li>’r’: Read-only - no data can be modified.</li>
<li>’w’: Write - a new file is created (an existing file with the same name would be deleted).</li>
<li>’a’ Append - an existing file is opened for reading and writing, and if the file does not exist it is created.</li>
<li>’r+’ (default) - Similar to ‘a’, but file must already exist.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Opened hdf file.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">tables.File</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.close_hdf">
<code class="descname">close_hdf</code><span class="sig-paren">(</span><em>h5f</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.close_hdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.close_hdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Flushes &amp; closes the open hdf file.
Must be called whenever <a class="reference internal" href="#autopilot.core.subject.Subject.open_hdf" title="autopilot.core.subject.Subject.open_hdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">open_hdf()</span></code></a> is used.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>h5f</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tables.File</span></code>) – the hdf file opened by <a class="reference internal" href="#autopilot.core.subject.Subject.open_hdf" title="autopilot.core.subject.Subject.open_hdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">open_hdf()</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.new_subject_file">
<code class="descname">new_subject_file</code><span class="sig-paren">(</span><em>biography</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.new_subject_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.new_subject_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new subject file and make the general filestructure.</p>
<p>If a file already exists, open it in append mode, otherwise create it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>biography</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – Biographical details like DOB, mass, etc.
Typically created by <code class="xref py py-class docutils literal notranslate"><span class="pre">Biography_Tab</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.ensure_structure">
<code class="descname">ensure_structure</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.ensure_structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.ensure_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that our h5f has the appropriate baseline structure as defined in <cite>self.STRUCTURE</cite></p>
<p>Checks that all groups and tables are made, makes them if not</p>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.update_biography">
<code class="descname">update_biography</code><span class="sig-paren">(</span><em>params</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.update_biography"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.update_biography" title="Permalink to this definition">¶</a></dt>
<dd><p>Change or make a new biographical attribute, stored as
attributes of the <cite>info</cite> group.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>params</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – biographical attributes to be updated.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.update_history">
<code class="descname">update_history</code><span class="sig-paren">(</span><em>type</em>, <em>name</em>, <em>value</em>, <em>step=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.update_history"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.update_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the history table when changes are made to the subject’s protocol.</p>
<p>The current protocol is flushed to the past_protocols group and an updated
filenode is created.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This <strong>only</strong> updates the history table, and does not make the changes itself.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>type</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – <p>What type of change is being made? Can be one of</p>
<ul>
<li>’param’ - a parameter of one task stage</li>
<li>’step’ - the step of the current protocol</li>
<li>’protocol’ - the whole protocol is being updated.</li>
</ul>
</li>
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – the name of either the parameter being changed or the new protocol</li>
<li><strong>value</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – the value that the parameter or step is being changed to,
or the protocol dictionary flattened to a string.</li>
<li><strong>step</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – When type is ‘param’, changes the parameter at a particular step,
otherwise the current step is used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.assign_protocol">
<code class="descname">assign_protocol</code><span class="sig-paren">(</span><em>protocol</em>, <em>step_n=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.assign_protocol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.assign_protocol" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign a protocol to the subject.</p>
<p>If the subject has a currently assigned task, stashes it with <a class="reference internal" href="#autopilot.core.subject.Subject.stash_current" title="autopilot.core.subject.Subject.stash_current"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stash_current()</span></code></a></p>
<p>Creates groups and tables according to the data descriptions in the task class being assigned.
eg. as described in <code class="xref py py-class docutils literal notranslate"><span class="pre">Task.TrialData</span></code>.</p>
<p>Updates the history table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>protocol</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – <p>the protocol to be assigned. Can be one of</p>
<ul>
<li>the name of the protocol (its filename minus .json) if it is in <cite>prefs.PROTOCOLDIR</cite></li>
<li>filename of the protocol (its filename with .json) if it is in the <cite>prefs.PROTOCOLDIR</cite></li>
<li>the full path and filename of the protocol.</li>
</ul>
</li>
<li><strong>step_n</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – Which step is being assigned?</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.flush_current">
<code class="descname">flush_current</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.flush_current"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.flush_current" title="Permalink to this definition">¶</a></dt>
<dd><p>Flushes the ‘current’ attribute in the subject object to the current filenode
in the .h5</p>
<p>Used to make sure the stored .json representation of the current task stays up to date
with the params set in the subject object</p>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.stash_current">
<code class="descname">stash_current</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.stash_current"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.stash_current" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the current protocol in the history group and delete the node</p>
<p>Typically this is called when assigning a new protocol.</p>
<p>Stored as the date that it was changed followed by its name if it has one</p>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.prepare_run">
<code class="descname">prepare_run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.prepare_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.prepare_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares the Subject object to receive data while running the task.</p>
<p>Gets information about current task, trial number,
spawns <a class="reference internal" href="autopilot.tasks.graduation.html#autopilot.tasks.graduation.Graduation" title="autopilot.tasks.graduation.Graduation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Graduation</span></code></a> object,
spawns <code class="xref py py-attr docutils literal notranslate"><span class="pre">data_queue</span></code> and calls <a class="reference internal" href="#autopilot.core.subject.Subject.data_thread" title="autopilot.core.subject.Subject.data_thread"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_thread()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>the parameters for the current step, with subject id, step number,</dt>
<dd>current trial, and session number included.</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">Dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.data_thread">
<code class="descname">data_thread</code><span class="sig-paren">(</span><em>queue</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.data_thread"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.data_thread" title="Permalink to this definition">¶</a></dt>
<dd><p>Thread that keeps hdf file open and receives data while task is running.</p>
<p>receives data through <code class="xref py py-attr docutils literal notranslate"><span class="pre">queue</span></code> as dictionaries. Data can be
partial-trial data (eg. each phase of a trial) as long as the task returns a dict with
‘TRIAL_END’ as a key at the end of each trial.</p>
<p>each dict given to the queue should have the <cite>trial_num</cite>, and this method can
properly store data without passing <cite>TRIAL_END</cite> if so. I recommend being explicit, however.</p>
<p>Checks graduation state at the end of each trial.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>queue</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">queue.Queue</span></code>) – passed by <a class="reference internal" href="#autopilot.core.subject.Subject.prepare_run" title="autopilot.core.subject.Subject.prepare_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">prepare_run()</span></code></a> and used by other
objects to pass data to be stored.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.save_data">
<code class="descname">save_data</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.save_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.save_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternate and equivalent method of putting data in the queue as <cite>Subject.data_queue.put(data)</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – trial data. each should have a ‘trial_num’, and a dictionary with key
‘TRIAL_END’ should be passed at the end of each trial.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.stop_run">
<code class="descname">stop_run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.stop_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.stop_run" title="Permalink to this definition">¶</a></dt>
<dd><p>puts ‘END’ in the data_queue, which causes <a class="reference internal" href="#autopilot.core.subject.Subject.data_thread" title="autopilot.core.subject.Subject.data_thread"><code class="xref py py-meth docutils literal notranslate"><span class="pre">data_thread()</span></code></a> to end.</p>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.get_trial_data">
<code class="descname">get_trial_data</code><span class="sig-paren">(</span><em>step=-1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.get_trial_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.get_trial_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get trial data from the current task.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>step</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a><em>, </em><em>list</em><em>, </em><em>'all'</em>) – <p>Step that should be returned, can be one of</p>
<ul class="simple">
<li>-1: most recent step</li>
<li>int: a single step</li>
<li>list of two integers eg. [0, 5], an inclusive range of steps.</li>
<li>anything else, eg. ‘all’: all steps.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">DataFrame of requested steps’ trial data.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.25.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.get_step_history">
<code class="descname">get_step_history</code><span class="sig-paren">(</span><em>use_history=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.get_step_history"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.get_step_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a dataframe of step numbers, timestamps, and step names
as a coarse view of training status.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>use_history</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether to use the history table or to reconstruct steps and dates from the trial table itself.
compatibility fix for old versions that didn’t stash step changes when the whole protocol was updated.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.25.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.get_timestamp">
<code class="descname">get_timestamp</code><span class="sig-paren">(</span><em>simple=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.get_timestamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a timestamp.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>simple</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – <dl class="docutils">
<dt>if True:</dt>
<dd>returns as format ‘%y%m%d-%H%M%S’, eg ‘190201-170811’</dd>
<dt>if False:</dt>
<dd>returns in isoformat, eg. ‘2019-02-01T17:08:02.058808’</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">basestring</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.get_weight">
<code class="descname">get_weight</code><span class="sig-paren">(</span><em>which='last'</em>, <em>include_baseline=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.get_weight"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.get_weight" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets start and stop weights.</p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">add ability to get weights by session number, dates, and ranges.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>which</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – if ‘last’, gets most recent weights. Otherwise returns all weights.</li>
<li><strong>include_baseline</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – if True, includes baseline and minimum mass.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.set_weight">
<code class="descname">set_weight</code><span class="sig-paren">(</span><em>date</em>, <em>col_name</em>, <em>new_value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.set_weight"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.set_weight" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates an existing weight in the weight table.</p>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">Yes, i know this is bad. Merge with update_weights</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>date</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – date in the ‘simple’ format, %y%m%d-%H%M%S</li>
<li><strong>col_name</strong> (<em>'start'</em><em>, </em><em>'stop'</em>) – are we updating a pre-task or post-task weight?</li>
<li><strong>new_value</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – New mass.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.update_weights">
<code class="descname">update_weights</code><span class="sig-paren">(</span><em>start=None</em>, <em>stop=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.update_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.update_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Store either a starting or stopping mass.</p>
<p><cite>start</cite> and <cite>stop</cite> can be passed simultaneously, <cite>start</cite> can be given in one
call and <cite>stop</cite> in a later call, but <cite>stop</cite> should not be given before <cite>start</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Mass before running task in grams</li>
<li><strong>stop</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Mass after running task in grams.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autopilot.core.subject.Subject.graduate">
<code class="descname">graduate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/autopilot/core/subject.html#Subject.graduate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autopilot.core.subject.Subject.graduate" title="Permalink to this definition">¶</a></dt>
<dd><p>Increase the current step by one, unless it is the last step.</p>
</dd></dl>

<dl class="class">
<dt id="autopilot.core.subject.Subject.History_Table">
<em class="property">class </em><code class="descname">History_Table</code><a class="headerlink" href="#autopilot.core.subject.Subject.History_Table" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tables.description.IsDescription</span></code></p>
<p>Class to describe parameter and protocol change history</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="https://docs.python.org/2/library/time.html#module-time" title="(in Python v2.7)"><strong>time</strong></a> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – timestamps</li>
<li><a class="reference internal" href="../autopilot.stim.sound.sounds.html#autopilot.stim.sound.sounds.Speech.type" title="autopilot.stim.sound.sounds.Speech.type"><strong>type</strong></a> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Type of change - protocol, parameter, step</li>
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Name - Which parameter was changed, name of protocol, manual vs. graduation step change</li>
<li><a class="reference internal" href="autopilot.core.networking.html#autopilot.core.networking.Message.value" title="autopilot.core.networking.Message.value"><strong>value</strong></a> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Value - What was the parameter/protocol/etc. changed to, step if protocol.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="autopilot.core.subject.Subject.History_Table.columns">
<code class="descname">columns</code><em class="property"> = {'name': StringCol(itemsize=256, shape=(), dflt='', pos=None), 'time': StringCol(itemsize=256, shape=(), dflt='', pos=None), 'type': StringCol(itemsize=256, shape=(), dflt='', pos=None), 'value': StringCol(itemsize=4028, shape=(), dflt='', pos=None)}</em><a class="headerlink" href="#autopilot.core.subject.Subject.History_Table.columns" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="autopilot.core.subject.Subject.Weight_Table">
<em class="property">class </em><code class="descname">Weight_Table</code><a class="headerlink" href="#autopilot.core.subject.Subject.Weight_Table" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tables.description.IsDescription</span></code></p>
<p>Class to describe table for weight history</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="autopilot.stim.visual.visuals.html#autopilot.stim.visual.visuals.Grating_Continuous.start" title="autopilot.stim.visual.visuals.Grating_Continuous.start"><strong>start</strong></a> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Pre-task mass</li>
<li><a class="reference internal" href="autopilot.stim.visual.visuals.html#autopilot.stim.visual.visuals.Grating_Continuous.stop" title="autopilot.stim.visual.visuals.Grating_Continuous.stop"><strong>stop</strong></a> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Post-task mass</li>
<li><strong>date</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Timestamp in simple format</li>
<li><strong>session</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – Session number</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="autopilot.core.subject.Subject.Weight_Table.columns">
<code class="descname">columns</code><em class="property"> = {'date': StringCol(itemsize=256, shape=(), dflt='', pos=None), 'session': Int32Col(shape=(), dflt=0, pos=None), 'start': Float32Col(shape=(), dflt=0.0, pos=None), 'stop': Float32Col(shape=(), dflt=0.0, pos=None)}</em><a class="headerlink" href="#autopilot.core.subject.Subject.Weight_Table.columns" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="autopilot.core.subject.Subject.Hash_Table">
<em class="property">class </em><code class="descname">Hash_Table</code><a class="headerlink" href="#autopilot.core.subject.Subject.Hash_Table" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tables.description.IsDescription</span></code></p>
<p>Class to describe table for hash history</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="https://docs.python.org/2/library/time.html#module-time" title="(in Python v2.7)"><strong>time</strong></a> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Timestamps</li>
<li><a class="reference external" href="https://docs.python.org/2/library/functions.html#hash" title="(in Python v2.7)"><strong>hash</strong></a> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Hash of the currently checked out commit of the git repository.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="autopilot.core.subject.Subject.Hash_Table.columns">
<code class="descname">columns</code><em class="property"> = {'hash': StringCol(itemsize=40, shape=(), dflt='', pos=None), 'time': StringCol(itemsize=256, shape=(), dflt='', pos=None)}</em><a class="headerlink" href="#autopilot.core.subject.Subject.Hash_Table.columns" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Jonny Saunders

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>